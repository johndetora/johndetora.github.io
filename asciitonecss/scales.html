<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scales</title>
</head>

<body>

</body>

<script type="text/javascript">

    const chromaticScale = [
        'C3', //  0
        'C#3', // 1
        'D3', //  2
        'D#3', // 3
        'E3', //  4
        'F3', //  5
        'F#3', // 6
        'G3', //  7
        'G#3', // 8
        'A3', //  9
        'A#3', // 10
        'B3', //  11
        'C4', //  12
    ];

    // I realize now that I should probably make these all in the same key
    // I can use this in the notes create class, or just assign them seperately to slider notes
    let scales = [
        {
            name: 'major',
            notes: chromaticScale[(0, 2, 4, 5, 7, 9, 11, 12)],
        },
        {
            // !!! Placeholder, I'm not sure the notes are accurate here
            name: 'dorian',
            notes: chromaticScale[(0, 2, 3, 5, 7, 9, 10, 12)],
        },
    ];


    let sliderNotes = {
        0: 'C3',
        1: 'D3',
        2: 'E3',
        3: 'F3',
        4: 'G3',
        5: 'A3',
        6: 'B3',
        7: 'C4',
        8: 'D4',
        9: 'E4',
        10: 'F4',
    };


    let notes = [

        {
            // Step 1
            time: '0:0:0',
            note: 'A3',
            velocity: 1,
            timing: '16n',
            repeat: 0,
        },

        {
            // Step 2
            time: '0:1:0',
            note: 'A3',
            velocity: 1,
            timing: '16n',
            repeat: 1,
        },
        {
            // Step 3
            time: '0:2:0',
            note: 'A3',
            velocity: 1,
            timing: '16n',
            repeat: 0,
        },

        {
            // Step 4
            time: '0:3:0',
            note: 'A3',
            velocity: 1,
            timing: '16n',
            repeat: 0,
        },
        {
            // Step 5
            time: '1:0:0',
            note: 'A3',
            velocity: 1,
            timing: '16n',
            repeat: 0,
        },
        {
            // Step 6
            time: '1:1:0',
            note: 'A3',
            velocity: 1,
            timing: '16n',
            repeat: 0,
        },
        {
            // Step 7
            time: '1:2:0',
            note: 'A3',
            velocity: 1,
            timing: '16n',
            repeat: 0,
        },
        {
            // Step 8
            time: '1:3:0',
            note: 'A3',
            velocity: 1,
            timing: '16n',
            repeat: 0,
        },
    ];


    class Note {
        constructor(_time, _note, _velocity, _timing, _repeat) {
            console.log(this);
            this.time = _time;
            this.note = _note;
            this.velocity = _velocity;
            this.timing = _timing;
            this.repeat = _repeat;
        }

        randomize() {
            // Call this method to make new note object with a random note
            const randomNote = Math.floor(Math.random() * 10)
            this.note = sliderNotes[randomNote]
            //  this.note = sliderNotes[randomNote]
        }

        shuffleAll() {

        }
    }

    // let note1 = new Note('0:3:0', 'C6', 1, '4n', 0).randomize()

    // This may be more useful than randomize(), since it would retain the other property values
    // Randomize notes in current pattern
    function shuffleNotes() {
        for (let i = 0; i < notes.length; i++) {
            const randomNote = Math.floor(Math.random() * 10)
            // notes[i] = new Note('0:3:0', 'C6', 1, '4n', 0).randomize()
            notes[i].note = sliderNotes[randomNote]
        }
        console.log(notes)
    }

    // Coin Toss.  Will use this to choose between rest on/off, decide if note randomize class method is called, etc.
    function coinToss(step) {
        const coinToss = Math.floor(Math.random() * 2)
        notes[step].velocity = coinToss
    }
    // console.log(coinToss(2, 1))

    // I can make an easy to use function to encapsulate the above functions.
    // for example: totalRandom(1, 0) would cause the note to get randomized, but the velocity to not be
    function totalRandom(note, velocity, repeat) {
        if (note == true) shuffleNotes()
        if (velocity == true) coinToss(step)
        // add repeat function

    }

    coinToss(1)
    console.log(notes)

    // Next step: make function to randomize all parameters

    // shuffleNotes()

</script>









</html>