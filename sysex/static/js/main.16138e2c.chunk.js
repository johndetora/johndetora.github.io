(this["webpackJsonpsysex-t9"]=this["webpackJsonpsysex-t9"]||[]).push([[0],{13:function(e,t){},25:function(e,t){},26:function(e,t){},27:function(e,t,s){"use strict";s.r(t);var n=s(1),c=s.n(n),a=s(14),r=s.n(a),o=s(11),l=s(5),i=s(2),d=s.n(i),j=(s(3),s(0)),u=function(e){return d.a.enable((function(t){t&&console.log("WebMidi could not be enabled.",t);var s=d.a.inputs[0],n=d.a.outputs[0];e.setInput(s),e.setOutput(n)}),!0),Object(j.jsxs)("div",{children:[Object(j.jsx)("span",{children:"Input Port: "}),Object(j.jsx)("select",{className:"ports",onChange:function(e){return console.log(e)},children:d.a.inputs.map((function(e){return Object(j.jsx)("option",{children:e.name},e.id)}))}),Object(j.jsx)("span",{className:"output",children:"Output Port: "}),Object(j.jsx)("select",{className:"ports",children:d.a.outputs.map((function(e){return Object(j.jsx)("option",{children:e.name},e.id)}))})]})},p=s(7);var h=function(e){return Object(j.jsx)("input",{type:"file",className:"file",onChange:function(t){!function(t){var s=new FileReader;s.readAsArrayBuffer(t),s.onload=function(t){var s=t.target.result,n=p.read(s,{type:"buffer"}).Sheets.SysEx;console.log("worksheet",n);var c=p.utils.sheet_to_json(n,{header:1});console.group(),console.table("data",c);for(var a=[],r=c.length,o=3;o<r;o++)a.push({index:o,name:c[o][0],port:c[o][1],sysex:c[o][2],expected:c[o][3],expectedLength:null,response:"",responseLength:null,passFail:null});e.setItems(a),console.table("sheet object",a),console.log("Worksheet load successful")}}(t.target.files[0])}})};var b=function(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),s=t[0],c=t[1],a=Object(n.useState)(),r=Object(l.a)(a,2),i=r[0],d=r[1],p=Object(n.useState)(),b=Object(l.a)(p,2),x=b[0],O=b[1],m=Object(n.useState)([]),f=Object(l.a)(m,2);function g(e){console.log(e);var t=parseInt(e.target.id),n=s.filter((function(e){return e.index===t})).map((function(e){return e.sysex})).join(" ").split(" ");n.splice(0,1);var a=n.map((function(e){return e="0x"+e,parseInt(Number(e,10))}));console.log("sent: (RAW)",a),x?(x.send(240,a),function(e){i.addListener("sysex","all",(function(t){var n=Object(o.a)(t.data);console.log("received (RAW):",n),console.log("response length is",n.length),function(e,t){var n=s.map((function(s){return s.index===e&&(-1===s.response.indexOf("F0")&&(s.response+=t),s.expectedLength||(s.expectedLength+=s.expected.split(" ").length),s.responseLength||(s.responseLength+=function(e){return e.length}(t)),s.responseLength===s.expectedLength&&(s.passFail="pass",console.table(s))),s}));console.log("sysex response: "+t.join("")),c(n)}(e,function(e){return e.map((function(e){return 2===(e=e.toString(16)+" ").length&&(e="0"+e),e.toUpperCase()}))}(n))}))}(t)):alert("No MIDI output port selected")}return f[0],f[1],Object(j.jsxs)("div",{className:"container",children:[Object(j.jsxs)("div",{className:"utilities",children:[Object(j.jsx)(h,{setItems:c}),Object(j.jsx)(u,{setInput:d,setOutput:O,input:i,output:x})]}),Object(j.jsx)("div",{className:"main-container",children:Object(j.jsxs)("table",{className:"table-container",children:[Object(j.jsx)("thead",{children:Object(j.jsxs)("tr",{className:"table-header",children:[Object(j.jsx)("th",{className:"header__item",children:"Name"}),Object(j.jsx)("th",{children:"Port"}),Object(j.jsx)("th",{children:"Sysex Message"}),Object(j.jsx)("th",{children:"Expected"}),Object(j.jsx)("th",{children:"Response"}),Object(j.jsx)("th",{children:"Pass/Fail"}),Object(j.jsx)("th",{children:"Notes"})]})}),Object(j.jsx)("tbody",{children:s.map((function(e){return Object(j.jsxs)("tr",{className:"table_row",children:[Object(j.jsx)("td",{className:"msg_name",children:e.name}),Object(j.jsx)("td",{className:"port",children:e.port}),Object(j.jsx)("td",{className:"sysex-container",children:Object(j.jsxs)("div",{className:"sysex-cell",children:[e.sysex,Object(j.jsxs)("button",{className:"send-button",id:e.index,value:e.sysex,onClick:g,children:["test"," "]})]})}),Object(j.jsx)("td",{className:"response",children:e.expected}),Object(j.jsx)("td",{className:"response",children:e.response.match(/[^,*]/gm)}),Object(j.jsx)("td",{}),Object(j.jsxs)("td",{children:[Object(j.jsx)("div",{className:"pass"===e.passFail?"pass":"fail",children:e.responseLength?"Response: ".concat(e.responseLength," bytes"):""}),Object(j.jsx)("input",{type:"textarea",cols:"5",rows:"10",wrap:"hard",className:"notes"})]})]},e.index)}))})]})})]})};r.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(b,{})}),document.getElementById("root"))},3:function(e,t,s){}},[[27,1,2]]]);
//# sourceMappingURL=main.16138e2c.chunk.js.map